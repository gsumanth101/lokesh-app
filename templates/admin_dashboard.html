<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Smart Farming Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='interface-styles.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-shield-alt"></i> Admin Dashboard</h1>
                <p>System Administration & Management</p>
                <div class="header-actions">
                    <div class="user-info">
                        <span id="user-name">Welcome, Admin!</span>
                        <button class="btn-logout" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                    <div class="language-selector">
                        <select id="languageSelect" onchange="changeLanguage()">
                            <option value="en">English</option>
                            <option value="hi">हिंदी</option>
                            <option value="te">తెలుగు</option>
                            <option value="ta">தமிழ்</option>
                            <option value="kn">ಕನ್ನಡ</option>
                            <option value="ml">മലയാളം</option>
                            <option value="gu">ગુજરાતી</option>
                            <option value="mr">मराठी</option>
                            <option value="bn">বাংলা</option>
                            <option value="pa">ਪੰਜਾਬੀ</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-button active" onclick="showTab('user-management')">
                <i class="fas fa-users"></i> <span data-lang="user_management">User Management</span>
            </button>
            <button class="tab-button" onclick="showTab('system-stats')">
                <i class="fas fa-chart-bar"></i> <span data-lang="system_stats">System Statistics</span>
            </button>
            <button class="tab-button" onclick="showTab('market-control')">
                <i class="fas fa-dollar-sign"></i> <span data-lang="market_control">Market Control</span>
            </button>
            <button class="tab-button" onclick="showTab('reports')">
                <i class="fas fa-file-alt"></i> <span data-lang="reports">Reports</span>
            </button>
            <button class="tab-button" onclick="showTab('settings')">
                <i class="fas fa-cog"></i> <span data-lang="settings">Settings</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- User Management Tab -->
            <div id="user-management" class="tab-content active">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> <span data-lang="user_management_title">User Management</span></h2>
                    <p data-lang="user_management_desc">Manage farmers, buyers, and agents in the system</p>
                </div>
                
                <div class="admin-stats-grid">
                    <div class="stat-card">
                        <h3><i class="fas fa-user-tie"></i> Total Users</h3>
                        <div class="stat-number" id="total-users">0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-tractor"></i> Farmers</h3>
                        <div class="stat-number" id="total-farmers">0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-shopping-cart"></i> Buyers</h3>
                        <div class="stat-number" id="total-buyers">0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-handshake"></i> Agents</h3>
                        <div class="stat-number" id="total-agents">0</div>
                    </div>
                </div>

                <div class="admin-actions">
                    <button class="btn-primary" onclick="showAddUserForm()">
                        <i class="fas fa-user-plus"></i> Add New User
                    </button>
                    <button class="btn-secondary" onclick="exportUserData()">
                        <i class="fas fa-download"></i> Export Users
                    </button>
                </div>

                <div id="users-table" class="data-table">
                    <!-- Users table will be populated here -->
                </div>
            </div>

            <!-- System Statistics Tab -->
            <div id="system-stats" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> <span data-lang="system_stats_title">System Statistics</span></h2>
                    <p data-lang="system_stats_desc">Overview of system performance and usage</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3><i class="fas fa-seedling"></i> Total Crop Listings</h3>
                        <div class="stat-number" id="total-listings">0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-exchange-alt"></i> Completed Transactions</h3>
                        <div class="stat-number" id="total-transactions">0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-rupee-sign"></i> Total Revenue</h3>
                        <div class="stat-number" id="total-revenue">₹0</div>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-clock"></i> Active Sessions</h3>
                        <div class="stat-number" id="active-sessions">0</div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <h3>User Registration Trends</h3>
                        <div id="user-chart" class="chart-placeholder">
                            <i class="fas fa-chart-line"></i>
                            <p>Chart will be displayed here</p>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Transaction Volume</h3>
                        <div id="transaction-chart" class="chart-placeholder">
                            <i class="fas fa-chart-bar"></i>
                            <p>Chart will be displayed here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Control Tab -->
            <div id="market-control" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-dollar-sign"></i> <span data-lang="market_control_title">Market Price Control</span></h2>
                    <p data-lang="market_control_desc">Manage and update market prices for crops</p>
                </div>
                
                <div class="form-container">
                    <div class="input-group">
                        <label for="crop-select"><i class="fas fa-seedling"></i> Select Crop</label>
                        <select id="crop-select">
                            <option value="">Choose a crop</option>
                            <option value="rice">Rice</option>
                            <option value="wheat">Wheat</option>
                            <option value="maize">Maize</option>
                            <option value="cotton">Cotton</option>
                            <option value="sugarcane">Sugarcane</option>
                            <option value="tomato">Tomato</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="new-price"><i class="fas fa-rupee-sign"></i> New Price (per kg)</label>
                        <input type="number" id="new-price" step="0.01" placeholder="Enter new price">
                    </div>
                    
                    <div class="input-group">
                        <label for="price-reason"><i class="fas fa-comment"></i> Reason for Change</label>
                        <textarea id="price-reason" placeholder="Enter reason for price change"></textarea>
                    </div>
                    
                    <button class="btn-primary" onclick="updateMarketPrice()">
                        <i class="fas fa-save"></i> Update Price
                    </button>
                </div>
                
                <div id="current-prices" class="market-prices-display">
                    <!-- Current prices will be displayed here -->
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-file-alt"></i> <span data-lang="reports_title">System Reports</span></h2>
                    <p data-lang="reports_desc">Generate and download system reports</p>
                </div>
                
                <div class="reports-grid">
                    <div class="report-card">
                        <h3><i class="fas fa-users"></i> User Activity Report</h3>
                        <p>Detailed report on user registrations and activity</p>
                        <button class="btn-secondary" onclick="generateReport('user-activity')">
                            <i class="fas fa-download"></i> Generate Report
                        </button>
                    </div>
                    
                    <div class="report-card">
                        <h3><i class="fas fa-chart-line"></i> Transaction Report</h3>
                        <p>Summary of all transactions and revenue</p>
                        <button class="btn-secondary" onclick="generateReport('transactions')">
                            <i class="fas fa-download"></i> Generate Report
                        </button>
                    </div>
                    
                    <div class="report-card">
                        <h3><i class="fas fa-seedling"></i> Crop Listings Report</h3>
                        <p>Analysis of crop listings and market trends</p>
                        <button class="btn-secondary" onclick="generateReport('crop-listings')">
                            <i class="fas fa-download"></i> Generate Report
                        </button>
                    </div>
                    
                    <div class="report-card">
                        <h3><i class="fas fa-dollar-sign"></i> Price History Report</h3>
                        <p>Historical price changes and market analysis</p>
                        <button class="btn-secondary" onclick="generateReport('price-history')">
                            <i class="fas fa-download"></i> Generate Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-cog"></i> <span data-lang="settings_title">System Settings</span></h2>
                    <p data-lang="settings_desc">Configure system parameters and preferences</p>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-database"></i> Database Management</h3>
                    <div class="settings-actions">
                        <button class="btn-primary" onclick="backupDatabase()">
                            <i class="fas fa-save"></i> Backup Database
                        </button>
                        <button class="btn-secondary" onclick="optimizeDatabase()">
                            <i class="fas fa-cogs"></i> Optimize Database
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-bell"></i> Notification Settings</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="email-notifications" checked>
                        <label for="email-notifications">Enable Email Notifications</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="sms-notifications" checked>
                        <label for="sms-notifications">Enable SMS Notifications</label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3><i class="fas fa-shield-alt"></i> Security Settings</h3>
                    <div class="form-container">
                        <div class="input-group">
                            <label for="session-timeout">Session Timeout (minutes)</label>
                            <input type="number" id="session-timeout" value="30" min="5" max="120">
                        </div>
                        <div class="input-group">
                            <label for="max-login-attempts">Max Login Attempts</label>
                            <input type="number" id="max-login-attempts" value="5" min="3" max="10">
                        </div>
                    </div>
                </div>
                
                <button class="btn-primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i> Save Settings
                </button>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2025 Smart Farming Assistant - Admin Panel. <span data-lang="all_rights_reserved">All rights reserved.</span></p>
            </div>
        </footer>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
        <p data-lang="loading">Loading...</p>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='translations.js') }}"></script>
    <script src="{{ url_for('static', filename='admin-script.js') }}"></script>
</body>
</html>
